---
title: 轻松应对亿级流量，专享型API网关正式对外开放
description: 如何轻松应对亿级业务流量？文末有礼！
date: 2021-05-12
thumbnail: https://main.qcloudimg.com/raw/505f43d112ae0ee25f02d79ed3e7b553.jpg
categories:
  - best-practice
authors:
  - 吴宜展
tags:
  - Serverless
  - 云函数
---

一部手机游云南是由云南省人民政府与腾讯公司联合打造的全域旅游智慧平台，由「一个中心、两个平台构成」，「一个中心」就是旅游大数据中心，为政府决策提供依据，「两个平台」就是为游客服务平台和政府监管服务平台。一部手机游云南于 2018 年 10 月 1 日正式上线运行，实现了「一机在手，全程无忧」的目标，目前是全国最大的景区实时直播平台，全国景区地理信息最全、导游导览提供服务最多的平台，旅游投诉处理最快的平台。

<img src="https://main.qcloudimg.com/raw/505f43d112ae0ee25f02d79ed3e7b553.jpg" width="300"/>



专享型腾讯云 API 网关（以下简称「专享实例」）作为一部手机游云南的接入层，连续多年保障系统的正常稳定进行。除此之外，PUBG Mobile、腾竞体育等多家腾讯内部用户也多次采用专享实例举办大型活动。近期，腾讯云 Serverless 团队正式开放了专享实例，希望对外提供更具竞争力的 API 网关产品，为客户的大型业务保驾护航。



## 01. 什么是专享实例？

在明确这个问题前，首先需要介绍「实例」的概念。「实例」是 API 网关底层资源的集合，实例可提供处理 API 所需的公网 IP、内网 IP、公网出口、计算、存储等能力。普通用户的 API 服务挂载在共享实例下，底层资源由一组用户所共享，不同租户间采用虚拟化隔离技术。但当您购买了专享实例后，API 网关将为您分配一块独占的专属资源池，相当于云上的「私家花园」，因此可提供更高的性能和 SLA 保证，更适合大型业务使用。

**实例对比：**

<img src="https://main.qcloudimg.com/raw/dfd31686c511440cc8cec2ab5b97962e.jpg" width="700"/>



## 02. 专享实例适用场景

API 网关专享实例的核心优势在于超高性能、超高 SLA 保证、安全性，典型的适用场景如下：

- **高并发场景**

电商秒杀、订票系统等高并发场景一般是定时触发，流量在瞬间突增，又要求客户端请求只有部分能够成功。可使用 API 网关专享实例 + 服务限流功能满足客户对高并发和限流的需要。

- **重要线上业务**

重要线上业务一般对稳定性、安全要求较高。API 网关专享实例提供超高 SLA，可保障客户业务平稳运行。

- **复杂网络环境**

用户的后端业务分布在公网、VPC、IDC 专线等多种复杂的网络环境中，又需要一个共同的流量出口。API 网关专享实例支持与云上的多种复杂网络环境打通，能作为这些复杂环境的统一接入层。



## 03. 专享实例产品特性

**1. 高性能、低延迟**

专享实例相较于共享实例，底层资源更由用户独享，因此具备更高的性能和更低延迟，最高可支持数万 QPS，轻松应对大流量。

**2. 网络互通**

API网关专享实例运行在 VPC 中，支持将客户端请求转发到部署在 VPC 内、专线 IDC 内、公网的各种服务。并且与云上常见的后端服务（云服务器 CVM、云函数 SCF、容器服务 TKE、腾讯微服务平台 TSF、负载均衡 CLB，以及用户部署在公网、内网 VPC、专线 IDC 内的服务）都进行了深度整合，提供产品化的对接方式。

**3. 固定且独立的出口地址**

与共享实例用户共享出口 IP 不同，API 网关专享实例提供固定且独立的出口 IP，保证业务长期稳定运行。

**4. 安全与高可用**

API 网关专享实例的安全与高可用可体现在物理隔离、集群化、异常地址剔除等几个方面。

- **物理隔离**：API 网关专享实例租户与本地域下的其他专享实例租户、共享实例租户之间完全物理隔离，实例间无数据交互，其他实例受到攻击不影响当前实例的稳定性；
- **集群化**：API 网关专享实例底层资源有多台机器，单台机器出现异常不影响整体服务的可用性；
- **异常地址剔除**：API 网关专享实例会动态监测后端健康情况，自动剔除后端异常地址；当配置多个后端地址时，部分地址异常不影响网关服务。
- **支持与安全产品对接**：API 网关专享实例支持与腾讯云提供的安全产品（如 Web 应用防火墙 WAF）对接，由专业安全服务提供安全支持。



## 04. 如何使用专享实例？

API 网关专享实例目前正在公测中，[**点击提交申请**](https://cloud.tencent.com/apply/p/fe86qn3zmfu) ，我们将在 1 个工作日内完成审批，通过后即可使用。



**第一步：购买实例**

1.  登录 API 网关控制台，在左侧导航栏中选择「实例」；

2. 单击「新建」按钮，跳转到 API 网关专享实例购买页；

<img src="https://main.qcloudimg.com/raw/8a89a3940aba8da40e07a2ada3357370.jpg" width="700"/>

3. 选择和填写实例配置：

- 计费模式：分为「按量计费」和「包年包月」两种。按量计费是实例的弹性计费模式，用户可随时开通/销毁实例，按实例的使用量付费。而包年包月是实例的预付费模式，用户可提前支付一个月或多个月的费用，价格相较于按量计费更为低廉。
- 地域与可用区：专享实例运行的地域与可用区，不同地域之间云产品不互通，选择最靠近客户的地域，可有效降低访问时延；
- 实例规格：专享实例提供五种规格供用户选择；
- 出带宽上限：通过 API 网关访问公网服务时，流出带宽的上限；
- 网络：专享实例运行在 VPC 中，因此创建时需要选择 VPC 和子网。

4. 点击「立即购买」提交购买申请，支付后即可完成专享实例的购买。



**第二步：创建服务并挂载实例**

1. 登录 API 网关控制台，在左侧导航栏中选择「服务」；

2. 单击「新建」按钮，实例类型选择「专享型」；

3. 在弹出的选择实例选项中，勾选第一步中购买的专享实例；

<img src="https://main.qcloudimg.com/raw/a789dab666a065b003baa066c9cda6a2.jpg" width="500"/>



4. 点击「提交」按钮，完成服务的创建。至此，该服务已经绑定在专享实例下，可享受专享实例的高性能、高可用性。



------

> **传送门：**
>
> - GitHub: [github.com/serverless](https://github.com/serverless/serverless/blob/master/README_CN.md)
> - 官网：[serverless.com](https://serverless.com/)

欢迎访问：[Serverless 中文网](https://serverlesscloud.cn/)，您可以在 [最佳实践](https://serverlesscloud.cn/best-practice) 里体验更多关于 Serverless 应用的开发！
