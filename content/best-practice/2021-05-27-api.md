---
title: 如何实现混合云场景下的接入层统一？
description: 在使用混合云架构时，用户的业务可能同时部署在公有云和私有云中，但又需要一个统一的接入层……
date: 2021-05-27
thumbnail: https://main.qcloudimg.com/raw/572d76d052f6807f1b74c903f23d02cc.jpg
categories:
  - best-practice
authors:
  - 吴宜展
tags:
  - Serverless
  - 云函数
---



## 01. 什么是混合云？

混合云是近年来云计算的主要模式和发展方向，私有云主要是面向企业用户，出于安全考虑，企业更愿意将数据存放在私有云中；但是同时又希望可以获得公有云的计算资源，混合云的诞生就是为了解决云连接的问题。

理论上，任何两个异构的云连接在一起都可称作混合云。它可以是私有云与公有云之间，公有云与公有云之间，甚至是私有云与私有云之间。但通常意义上，我们所指的混合云是指私有云与公有云的混合。

混合云能将不同云之间的资源进行混合和匹配，以获得最佳的效果，这种个性化的解决方案达到了既省钱又安全的目的。多家市场研究机构对企业 CIO 的调查都表明，混合云是企业最希望采用的上云方式。Gartner 更将混合云列为了 2020 年基础架构和运营的十大趋势之一。



## 02. 使用混合云所面临的挑战

在使用混合云架构时，用户的业务可能同时部署在公有云和私有云中，但又需要一个统一的接入层，这个接入层需要作为流量的出入口，并支持处理所有的非业务功能，如鉴权、限流等等。

腾讯云 API 网关专享实例运行在 VPC 中，支持将客户端请求转发到部署在 VPC 内、专线 IDC 内、公网的各种服务。并且与云上常见的后端服务都进行了深度整合，提供产品化的对接方式，非常适合作为复杂网络环境下业务的统一接入层。使用 API 网关对接公网和 VPC 内资源的操作较为简单，本文不再赘述，以下将重点介绍如何使用 API 网关专享实例对接云下本地数据中心（IDC）内的后端资源。



## 03. 使用 API 网关专享实例对接的优势

<img src="https://main.qcloudimg.com/raw/48b24eef3cee7b60f427ec71d0ca5f55.jpg" width="400"/>

- API 网关专享实例可将请求同时转发至部署在云上 VPC 内、云下 IDC 机房内、公网内的后端资源，无缝连接云上云下；

- 可同时使用腾讯云 API 网关提供的丰富功能，如 IP 访问控制、流量控制、日志健康等；

- 内网通过云联网互通，支持精细化选路保障质量，支持多样化阶梯计费降低成本。

  



## 04. 操作步骤

#### **第 1 步：新建云联网实例并关联网络实例**

1. 登录私有网络控制台，单击左侧目录中的「云联网」，进入云联网管理页面，单击「新建」，在弹出框中填写云联网实例名称、描述，选择计费模式、服务质量、限速方式。

2. 将 IDC 的专线网关和云上 VPC 环境关联起来。

<img src="https://main.qcloudimg.com/raw/a7f950f717e9c0b1af561d51aa1f5878.jpg" width="700"/>



#### **第 2 步：购买API网关专享实例**

1. 登录 API 网关控制台，在左侧导航栏中选择「实例」，单击「新建」按钮，跳转到 API 网关专享实例购买页；

2. 选择和填写实例配置。

- 注意：专享实例的 VPC 配置需要和第 1 步中云联网实例所关联的腾讯云 VPC 实例保持一致；

<img src="https://main.qcloudimg.com/raw/ce99e8934399faa33660171b65d707fb.jpg" width="700"/>

3. 点击「立即购买」按钮提交购买申请，支付后即可完成专享实例的购买。

#### 

#### **第 3 步：在实例下创建服务和 API**

1. 登录API网关控制台，在左侧导航栏中选择「服务」，单击「新建」按钮，实例类型选择「专享型」；

2. 在弹出的选择实例选项中，勾选第一步中购买的专享实例，点击「提交」按钮，完成服务创建；

3. 在服务列表中点击已经创建好的服务名称，进入服务的 API 管理页；

4. 点击「新建」按钮，进入 API 创建页面，依次填写配置。API 后端类型选择公网 URL/IP，后端地址输入需绑定的 IDC 内网 IP 地址、端口和路径，点击「提交」按钮，完成 API 创建。

5. 请求已创建好的 API，发现此时可以通过 API 网关访问到 IDC 内的后端资源。





------



> **传送门：**
>
> - GitHub: [github.com/serverless](https://github.com/serverless/serverless/blob/master/README_CN.md)
> - 官网：[serverless.com](https://serverless.com/)

欢迎访问：[Serverless 中文网](https://serverlesscloud.cn/)，您可以在 [最佳实践](https://serverlesscloud.cn/best-practice) 里体验更多关于 Serverless 应用的开发！



